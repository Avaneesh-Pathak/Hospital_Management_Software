{% extends 'hms/base.html' %}
{% load static %}

{% block content %}
<div class="nurse-dashboard">
    <!-- Header Section -->
    <header class="dashboard-header">
        <div class="header-content">
            <div class="header-left">
                <h1 class="dashboard-title">
                    <i class="fas fa-user-nurse"></i> Nursing Dashboard
                </h1>
                <div class="breadcrumb">
                    <span>Home</span> / <span>Nursing</span> / <span class="active">Dashboard</span>
                </div>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="user-avatar">
                        <img src="{% if nurse.user.profile_picture %}{{ nurse.user.profile_picture.url }}{% else %}{% static 'images/default-avatar.png' %}{% endif %}" alt="Nurse Avatar">
                    </div>
                    <div class="user-details">
                        <span class="welcome-message">Welcome back</span>
                        <span class="user-name">Nurse {{ nurse.user.get_full_name }}</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn-notification">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    <div class="current-time">
                        <i class="far fa-clock"></i> {{ current_time|date:"D, M j, Y" }} <strong>{{ current_time|time }}</strong>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Quick Stats Bar -->
    <div class="stats-bar">
        <div class="stat-card">
            <div class="stat-icon bg-primary">
                <i class="fas fa-procedures"></i>
            </div>
            <div class="stat-info">
                <span class="stat-value">{{ assigned_ipd_patients.count }}</span>
                <span class="stat-label">Active Patients</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon bg-warning">
                <i class="fas fa-file-medical-alt"></i>
            </div>
            <div class="stat-info">
                <span class="stat-value">{{ prescriptions_to_show.count }}</span>
                <span class="stat-label">Pending Meds</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon bg-danger">
                <i class="fas fa-ambulance"></i>
            </div>
            <div class="stat-info">
                <span class="stat-value">{{ emergency_cases.count }}</span>
                <span class="stat-label">Emergencies</span>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon bg-success">
                <i class="fas fa-heartbeat"></i>
            </div>
            <div class="stat-info">
                <span class="stat-value">{{ critical_vitals.count }}</span>
                <span class="stat-label">Critical Vitals</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="dashboard-content">
        <!-- Left Column -->
        <div class="dashboard-column">
            <!-- Assigned IPD Patients -->
            <section class="dashboard-widget card">
                <div class="widget-header">
                    <h3><i class="fas fa-procedures"></i> Admitted Patients</h3>
                    <div class="widget-actions">
                        <button class="btn-refresh" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <a href="{% url 'ipd' %}" class="btn-view-all">
                            View All <i class="fas fa-chevron-right"></i>
                        </a>
                    </div>
                </div>
                <div class="widget-content">
                    {% if assigned_ipd_patients %}
                    <div class="table-responsive">
                        <table class="patient-table">
                            <thead>
                                <tr>
                                    <th>Patient</th>
                                    <th>Room/Bed</th>
                                    <th>Admitted</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for patient in assigned_ipd_patients %}
                                <tr>
                                    <td>
                                        <div class="patient-info">
                                            <div class="patient-avatar">
                                                <img src="{% if patient.patient.user.profile_picture %}{{ patient.patient.user.profile_picture.url }}{% else %}{% static 'images/default-patient.png' %}{% endif %}" alt="Patient">
                                            </div>
                                            <div class="patient-details">
                                                <a href="{% url 'patient_detail' patient.patient.id %}" class="patient-link">
                                                    {{ patient.patient.user.full_name }}
                                                </a>
                                                <span class="patient-meta">ID: {{ patient.patient.patient_id }}</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        {% if patient.room %}
                                        <div class="room-info">
                                            <span class="badge room-badge">
                                                <i class="fas fa-door-open"></i> {{ patient.room.room_number }}/{{ patient.bed_number }}
                                            </span>
                                            <span class="room-type">{{ patient.room.room_type }}</span>
                                        </div>
                                        {% else %}
                                        <span class="badge warning-badge">Not assigned</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        <div class="admission-info">
                                            <span class="date">{{ patient.admitted_on|date:"M d" }}</span>
                                            <span class="time">{{ patient.admitted_on|time }}</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="status-container">
                                            <span class="status-badge active-badge">
                                                <i class="fas fa-circle"></i> Active
                                            </span>
                                            <div class="status-tooltip">
                                                Last checked: 2 hours ago
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn-action btn-chart" title="View Charts">
                                                <i class="fas fa-chart-line"></i>
                                            </button>
                                            <button class="btn-action btn-notes" title="Add Notes">
                                                <i class="fas fa-notes-medical"></i>
                                            </button>
                                            <button class="btn-action btn-more" title="More Options">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <div class="no-data-message">
                        <div class="no-data-icon">
                            <i class="fas fa-user-slash"></i>
                        </div>
                        <h4>No assigned patients</h4>
                        <p>You currently have no patients assigned to your care.</p>
                        <a href="{% url 'ipd' %}" class="btn btn-primary">
                            <i class="fas fa-procedures"></i> View All Patients
                        </a>
                    </div>
                    {% endif %}
                </div>
            </section>

            <!-- Pending Prescriptions -->
            <section class="dashboard-widget card">
                <div class="widget-header">
                    <h3><i class="fas fa-file-medical-alt"></i> Pending Prescriptions</h3>
                    <div class="widget-actions">
                        <button class="btn-refresh" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <a href="#" class="btn-view-all">
                            View All <i class="fas fa-chevron-right"></i>
                        </a>
                    </div>
                </div>
                <div class="widget-content">
                    {% if prescriptions_to_show %}
                    <ul class="medication-list">
                        {% for med in prescriptions_to_show %}
                        <li class="medication-item {% if med.timing and med.timing <= current_time %}due-now{% endif %}">
                            <div class="medication-info">
                                <div class="medication-details">
                                    <div class="medication-name">
                                        <strong>{{ med.medication }}</strong>
                                        <span class="dosage">{{ med.dosage }}</span>
                                        <span class="frequency">{{ med.frequency }}</span>
                                    </div>
                                    <div class="medication-instructions">
                                        {{ med.instructions|default:"No special instructions" }}
                                    </div>
                                </div>
                                <div class="medication-patient">
                                    <div class="patient-avatar small">
                                        <img src="{% if med.ipd.patient.user.profile_picture %}{{ med.ipd.patient.user.profile_picture.url }}{% else %}{% static 'images/default-patient.png' %}{% endif %}" alt="Patient">
                                    </div>
                                    <a href="{% url 'patient_detail' med.ipd.patient.id %}" class="patient-link">
                                        {{ med.ipd.patient.user.full_name }}
                                    </a>
                                </div>
                            </div>
                            <div class="medication-time">
                                <div class="time-indicator">
                                    <i class="far fa-clock"></i>
                                    {% if med.timing %}
                                        <span class="time-value">{{ med.timing|time }}</span>
                                        {% if med.timing <= current_time %}
                                            <span class="badge overdue-badge">
                                                <i class="fas fa-exclamation-circle"></i> OVERDUE
                                            </span>
                                        {% else %}
                                            <span class="badge due-badge">
                                                <i class="fas fa-clock"></i> Due
                                            </span>
                                        {% endif %}
                                    {% else %}
                                        <span class="badge no-time-badge">
                                            <i class="fas fa-question-circle"></i> No Time Set
                                        </span>
                                    {% endif %}
                                </div>
                                <button class="btn-administer" data-prescription-id="{{ med.id }}">
                                    <i class="fas fa-syringe"></i> Mark as Administered
                                </button>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    {% else %}
                    <div class="no-data-message">
                        <div class="no-data-icon success">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h4>All caught up!</h4>
                        <p>No pending prescriptions at the moment.</p>
                    </div>
                    {% endif %}
                </div>
            </section>
        </div>

        <!-- Right Column -->
        <div class="dashboard-column">
            <!-- Emergency Cases -->
            <section class="dashboard-widget card emergency-widget">
                <div class="widget-header">
                    <h3><i class="fas fa-ambulance"></i> Emergency Cases</h3>
                    <div class="widget-actions">
                        <button class="btn-refresh" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <a href="{% url 'emergency' %}" class="btn-view-all">
                            View All <i class="fas fa-chevron-right"></i>
                        </a>
                    </div>
                </div>
                <div class="widget-content">
                    {% if emergency_cases %}
                    <ul class="emergency-list">
                        {% for case in emergency_cases %}
                        <li class="emergency-item priority-{{ case.severity }}">
                            <div class="emergency-severity">
                                <div class="severity-level level-{{ case.severity }}"></div>
                            </div>
                            <div class="emergency-info">
                                <div class="emergency-patient">
                                    <div class="patient-avatar small">
                                        <img src="{% if case.patient.user.profile_picture %}{{ case.patient.user.profile_picture.url }}{% else %}{% static 'images/default-patient.png' %}{% endif %}" alt="Patient">
                                    </div>
                                    <a href="{% url 'patient_detail' case.patient.id %}" class="patient-link">
                                        {{ case.patient.user.full_name }}
                                    </a>
                                    <span class="emergency-type">{{ case.get_emergency_type_display }}</span>
                                </div>
                                <div class="emergency-description">
                                    {{ case.case_description|truncatechars:100 }}
                                </div>
                                <div class="emergency-meta">
                                    <span class="meta-item">
                                        <i class="fas fa-user-md"></i> 
                                        Dr. {{ case.attending_doctor.user.full_name|default:"Not assigned" }}
                                    </span>
                                    <span class="meta-item">
                                        <i class="fas fa-procedures"></i> 
                                        {% if case.ipd_admission %}
                                            Room {{ case.ipd_admission.room.room_number }}
                                        {% else %}
                                            Not admitted
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                            <div class="emergency-time">
                                <div class="time-ago">{{ case.admitted_on|timesince }} ago</div>
                                <div class="exact-time">{{ case.admitted_on|time }}</div>
                                <button class="btn-respond">
                                    <i class="fas fa-first-aid"></i> Respond
                                </button>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    {% else %}
                    <div class="no-data-message">
                        <div class="no-data-icon">
                            <i class="fas fa-thumbs-up"></i>
                        </div>
                        <h4>No emergencies</h4>
                        <p>No pending emergency cases at this time.</p>
                    </div>
                    {% endif %}
                </div>
            </section>

            <!-- Critical Vitals -->
            <section class="dashboard-widget card">
                <div class="widget-header">
                    <h3><i class="fas fa-heartbeat"></i> Critical Vitals</h3>
                    <div class="widget-actions">
                        <button class="btn-refresh" title="Refresh">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <a href="#" class="btn-view-all">
                            View All <i class="fas fa-chevron-right"></i>
                        </a>
                    </div>
                </div>
                <div class="widget-content">
                    {% if critical_vitals %}
                    <ul class="vitals-list">
                        {% for vital in critical_vitals %}
                        <li class="vital-item">
                            <div class="vital-patient">
                                <div class="patient-avatar small">
                                    <img src="{% if vital.ipd.patient.user.profile_picture %}{{ vital.ipd.patient.user.profile_picture.url }}{% else %}{% static 'images/default-patient.png' %}{% endif %}" alt="Patient">
                                </div>
                                <a href="{% url 'view_nicu_vitals' vital.ipd.id %}" class="patient-link">
                                    {{ vital.ipd.patient.user.full_name }}
                                </a>
                            </div>
                            <div class="vital-stats">
                                <div class="stat-item temperature {% if vital.temperature > 38 or vital.temperature < 36 %}abnormal{% endif %}">
                                    <div class="stat-icon">
                                        <i class="fas fa-temperature-high"></i>
                                    </div>
                                    <div class="stat-value">
                                        {{ vital.temperature|default:"--" }}Â°C
                                        {% if vital.temperature > 38 %}
                                        <span class="stat-trend up"><i class="fas fa-arrow-up"></i></span>
                                        {% elif vital.temperature < 36 %}
                                        <span class="stat-trend down"><i class="fas fa-arrow-down"></i></span>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="stat-item pulse {% if vital.pulse_rate > 100 or vital.pulse_rate < 60 %}abnormal{% endif %}">
                                    <div class="stat-icon">
                                        <i class="fas fa-heart"></i>
                                    </div>
                                    <div class="stat-value">
                                        {{ vital.pulse_rate|default:"--" }} BPM
                                        {% if vital.pulse_rate > 100 %}
                                        <span class="stat-trend up"><i class="fas fa-arrow-up"></i></span>
                                        {% elif vital.pulse_rate < 60 %}
                                        <span class="stat-trend down"><i class="fas fa-arrow-down"></i></span>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="stat-item respiratory {% if vital.respiratory_rate > 20 or vital.respiratory_rate < 12 %}abnormal{% endif %}">
                                    <div class="stat-icon">
                                        <i class="fas fa-lungs"></i>
                                    </div>
                                    <div class="stat-value">
                                        {{ vital.respiratory_rate|default:"--" }}
                                        {% if vital.respiratory_rate > 20 %}
                                        <span class="stat-trend up"><i class="fas fa-arrow-up"></i></span>
                                        {% elif vital.respiratory_rate < 12 %}
                                        <span class="stat-trend down"><i class="fas fa-arrow-down"></i></span>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="stat-item bp {% if vital.blood_pressure_systolic > 140 or vital.blood_pressure_diastolic > 90 %}abnormal{% endif %}">
                                    <div class="stat-icon">
                                        <i class="fas fa-tachometer-alt"></i>
                                    </div>
                                    <div class="stat-value">
                                        {{ vital.blood_pressure|default:"--" }}
                                    </div>
                                </div>
                            </div>
                            <div class="vital-time">
                                <div class="time-ago">{{ vital.datetime_recorded|timesince }} ago</div>
                                <div class="exact-time">{{ vital.datetime_recorded|time }}</div>

                                <button class="btn-chart">
                                    <i class="fas fa-chart-line"></i> Trends
                                </button>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    {% else %}
                    <div class="no-data-message">
                        <div class="no-data-icon success">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h4>Vitals stable</h4>
                        <p>No critical vitals in the last 4 hours.</p>
                    </div>
                    {% endif %}
                </div>
            </section>
        </div>
    </main>

    <!-- Bottom Row -->
    <div class="dashboard-bottom">
        <!-- Recent OPD Visits -->
        <section class="dashboard-widget card">
            <div class="widget-header">
                <h3><i class="fas fa-stethoscope"></i> Recent OPD Visits</h3>
                <div class="widget-actions">
                    <div class="filter-controls">
                        <select class="form-select time-filter">
                            <option>Today</option>
                            <option>This Week</option>
                            <option>This Month</option>
                        </select>
                    </div>
                    <a href="{% url 'opd' %}" class="btn-view-all">
                        View All <i class="fas fa-chevron-right"></i>
                    </a>
                </div>
            </div>
            <div class="widget-content">
                {% if recent_opd_visits %}
                <div class="table-responsive">
                    <table class="opd-table">
                        <thead>
                            <tr>
                                <th>Patient</th>
                                <th>Doctor</th>
                                <th>Diagnosis</th>
                                <th>Status</th>
                                <th>Time</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for visit in recent_opd_visits %}
                            <tr>
                                <td>
                                    <div class="patient-info">
                                        <div class="patient-avatar">
                                            <img src="{% if visit.patient.user.profile_picture %}{{ visit.patient.user.profile_picture.url }}{% else %}{% static 'images/default-patient.png' %}{% endif %}" alt="Patient">
                                        </div>
                                        <div class="patient-details">
                                            <a href="{% url 'opd' %}" class="patient-link">
                                                {{ visit.patient.user.full_name }}
                                            </a>
                                            <span class="patient-meta">ID: {{ visit.patient.patient_id }}</span>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div class="doctor-info">
                                        <div class="doctor-avatar">
                                            <img src="{% if visit.doctor.user.profile_picture %}{{ visit.doctor.user.profile_picture.url }}{% else %}{% static 'images/default-doctor.png' %}{% endif %}" alt="Doctor">
                                        </div>
                                        <span>Dr. {{ visit.doctor.user.full_name }}</span>
                                    </div>
                                </td>
                                <td>
                                    <div class="diagnosis-info">
                                        <div class="diagnosis-code">
                                            ICD-10: {{ visit.diagnosis_code|default:"--" }}
                                        </div>
                                        <div class="diagnosis-text">
                                            {{ visit.diagnosis|truncatechars:60 }}
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="status-badge completed-badge">
                                        <i class="fas fa-check-circle"></i> Completed
                                    </span>
                                </td>
                                <td>
                                    <div class="time-info">
                                        <div class="visit-date">{{ visit.visit_date|date:"M d, Y" }}</div>
                                        <div class="visit-time">{{ visit.visit_date|time }}</div>
                                    </div>
                                </td>
                                <td>
                                    <button class="btn-action btn-view" title="View Details">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn-action btn-print" title="Print Report">
                                        <i class="fas fa-print"></i>
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="no-data-message">
                    <div class="no-data-icon">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <h4>No recent visits</h4>
                    <p>No OPD visits recorded in the selected time period.</p>
                </div>
                {% endif %}
            </div>
        </section>
    </div>
</div>

<!-- Floating Action Button -->
<div class="fab-container">
    <button class="fab-primary">
        <i class="fas fa-plus"></i>
    </button>
    <div class="fab-options">
        <button class="fab-option" title="New Patient">
            <i class="fas fa-user-plus"></i>
        </button>
        <button class="fab-option" title="Quick Note">
            <i class="fas fa-notes-medical"></i>
        </button>
        <button class="fab-option" title="Emergency Alert">
            <i class="fas fa-bell"></i>
        </button>
    </div>
</div>
<style>
    /* Base Styles */
:root {
  --primary-color: #4361ee;
  --primary-light: #e6e9ff;
  --secondary-color: #3f37c9;
  --success-color: #4cc9f0;
  --danger-color: #f72585;
  --warning-color: #f8961e;
  --info-color: #4895ef;
  --dark-color: #2b2d42;
  --light-color: #f8f9fa;
  --gray-color: #6c757d;
  --gray-light: #e9ecef;
  --white: #ffffff;
  --border-radius: 0.5rem;
  --box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
  --transition: all 0.3s ease;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  line-height: 1.6;
  color: var(--dark-color);
  background-color: #f5f7fb;
}

a {
  text-decoration: none;
  color: inherit;
}

i {
  font-size: 1rem;
}

/* Dashboard Layout */
.nurse-dashboard {
  display: grid;
  grid-template-rows: auto auto 1fr;
  min-height: 100vh;
  padding: 1.5rem;
  gap: 1.5rem;
}

.dashboard-header {
  background-color: var(--white);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
  padding: 1.5rem;
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.header-left {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.dashboard-title {
  font-size: 1.75rem;
  font-weight: 600;
  color: var(--primary-color);
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.breadcrumb {
  font-size: 0.875rem;
  color: var(--gray-color);
}

.breadcrumb span.active {
  color: var(--primary-color);
  font-weight: 500;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 1.5rem;
}

.user-info {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.user-avatar {
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid var(--primary-light);
}

.user-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.user-details {
  display: flex;
  flex-direction: column;
}

.welcome-message {
  font-size: 0.75rem;
  color: var(--gray-color);
}

.user-name {
  font-weight: 600;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.btn-notification {
  position: relative;
  background: none;
  border: none;
  font-size: 1.25rem;
  color: var(--gray-color);
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  transition: var(--transition);
}

.btn-notification:hover {
  background-color: var(--gray-light);
  color: var(--primary-color);
}

.notification-badge {
  position: absolute;
  top: 0;
  right: 0;
  background-color: var(--danger-color);
  color: var(--white);
  border-radius: 50%;
  width: 1.25rem;
  height: 1.25rem;
  font-size: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.current-time {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
  background-color: var(--primary-light);
  padding: 0.5rem 1rem;
  border-radius: 2rem;
}

.current-time strong {
  font-weight: 600;
  color: var(--primary-color);
}

/* Stats Bar */
.stats-bar {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.stat-card {
  background-color: var(--white);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
  padding: 1.5rem;
  display: flex;
  align-items: center;
  gap: 1rem;
  transition: var(--transition);
}

.stat-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 0.75rem 1.5rem rgba(0, 0, 0, 0.1);
}

.stat-icon {
  width: 3.5rem;
  height: 3.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  color: var(--white);
}

.stat-icon.bg-primary {
  background-color: var(--primary-color);
}

.stat-icon.bg-warning {
  background-color: var(--warning-color);
}

.stat-icon.bg-danger {
  background-color: var(--danger-color);
}

.stat-icon.bg-success {
  background-color: var(--success-color);
}

.stat-info {
  display: flex;
  flex-direction: column;
}

.stat-value {
  font-size: 1.5rem;
  font-weight: 700;
}

.stat-label {
  font-size: 0.875rem;
  color: var(--gray-color);
}

/* Main Content */
.dashboard-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
}

.dashboard-column {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

/* Widget Styles */
.dashboard-widget {
  background-color: var(--white);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
  overflow: hidden;
}

.dashboard-widget.card {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.widget-header {
  padding: 1.25rem 1.5rem;
  border-bottom: 1px solid var(--gray-light);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.widget-header h3 {
  font-size: 1.25rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.widget-actions {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.btn-refresh {
  background: none;
  border: none;
  color: var(--gray-color);
  cursor: pointer;
  font-size: 1rem;
  padding: 0.5rem;
  border-radius: 50%;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-refresh:hover {
  background-color: var(--gray-light);
  color: var(--primary-color);
}

.btn-view-all {
  font-size: 0.875rem;
  color: var(--primary-color);
  display: flex;
  align-items: center;
  gap: 0.25rem;
  transition: var(--transition);
}

.btn-view-all:hover {
  color: var(--secondary-color);
  gap: 0.5rem;
}

.widget-content {
  padding: 1.5rem;
  flex: 1;
}

/* Table Styles */
.table-responsive {
  overflow-x: auto;
}

.patient-table, .opd-table {
  width: 100%;
  border-collapse: collapse;
}

.patient-table th, .patient-table td,
.opd-table th, .opd-table td {
  padding: 1rem;
  text-align: left;
  border-bottom: 1px solid var(--gray-light);
}

.patient-table th, .opd-table th {
  font-weight: 600;
  color: var(--gray-color);
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.patient-info, .doctor-info {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.patient-avatar, .doctor-avatar {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
}

.patient-avatar img, .doctor-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.patient-details {
  display: flex;
  flex-direction: column;
}

.patient-link {
  font-weight: 500;
  transition: var(--transition);
}

.patient-link:hover {
  color: var(--primary-color);
}

.patient-meta {
  font-size: 0.75rem;
  color: var(--gray-color);
}

.room-info {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.room-type {
  font-size: 0.75rem;
  color: var(--gray-color);
}

.admission-info, .time-info, .visit-date {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.date, .time-ago {
  font-size: 0.875rem;
}

.time, .exact-time {
  font-size: 0.75rem;
  color: var(--gray-color);
}

/* Badge Styles */
.badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 2rem;
  font-size: 0.75rem;
  font-weight: 500;
}

.room-badge {
  background-color: var(--primary-light);
  color: var(--primary-color);
}

.warning-badge {
  background-color: #fff3cd;
  color: #856404;
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.25rem 0.75rem;
  border-radius: 2rem;
  font-size: 0.75rem;
  font-weight: 500;
}

.active-badge {
  background-color: #d1fae5;
  color: #065f46;
}

.completed-badge {
  background-color: #dbeafe;
  color: #1e40af;
}

.overdue-badge {
  background-color: #fee2e2;
  color: #b91c1c;
}

.due-badge {
  background-color: #fef3c7;
  color: #92400e;
}

.no-time-badge {
  background-color: var(--gray-light);
  color: var(--gray-color);
}

/* Medication List */
.medication-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.medication-item {
  background-color: var(--white);
  border-radius: var(--border-radius);
  padding: 1rem;
  border-left: 4px solid var(--primary-color);
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  transition: var(--transition);
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.05);
}

.medication-item.due-now {
  border-left-color: var(--warning-color);
  background-color: #fff9ed;
}

.medication-info {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  flex: 1;
}

.medication-details {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.medication-name {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 1rem;
}

.dosage {
  font-size: 0.875rem;
  color: var(--gray-color);
}

.frequency {
  font-size: 0.75rem;
  background-color: var(--gray-light);
  color: var(--gray-color);
  padding: 0.25rem 0.5rem;
  border-radius: 2rem;
}

.medication-patient {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
}

.medication-time {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0.75rem;
  min-width: 120px;
}

.time-indicator {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-administer {
  background-color: var(--primary-color);
  color: var(--white);
  border: none;
  border-radius: 2rem;
  padding: 0.5rem 1rem;
  font-size: 0.75rem;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-administer:hover {
  background-color: var(--secondary-color);
}

/* Emergency List */
.emergency-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.emergency-item {
  background-color: var(--white);
  border-radius: var(--border-radius);
  padding: 1rem;
  display: flex;
  gap: 1rem;
  transition: var(--transition);
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.05);
  position: relative;
}

.emergency-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  border-radius: var(--border-radius) 0 0 var(--border-radius);
}

.emergency-item.priority-1::before {
  background-color: var(--danger-color);
}

.emergency-item.priority-2::before {
  background-color: var(--warning-color);
}

.emergency-item.priority-3::before {
  background-color: var(--info-color);
}

.emergency-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.emergency-patient {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
}

.emergency-type {
  font-size: 0.75rem;
  background-color: var(--gray-light);
  color: var(--gray-color);
  padding: 0.25rem 0.5rem;
  border-radius: 2rem;
}

.emergency-description {
  font-size: 0.875rem;
  color: var(--gray-color);
}

.emergency-meta {
  display: flex;
  gap: 1rem;
  font-size: 0.75rem;
  color: var(--gray-color);
}

.meta-item {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.emergency-time {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0.75rem;
  min-width: 120px;
}

.btn-respond {
  background-color: var(--danger-color);
  color: var(--white);
  border: none;
  border-radius: 2rem;
  padding: 0.5rem 1rem;
  font-size: 0.75rem;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-respond:hover {
  background-color: #d1145a;
}

/* Vitals List */
.vitals-list {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.vital-item {
  background-color: var(--white);
  border-radius: var(--border-radius);
  padding: 1rem;
  display: flex;
  gap: 1rem;
  transition: var(--transition);
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.05);
}

.vital-patient {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
  min-width: 150px;
}

.vital-stats {
  flex: 1;
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  border-radius: 2rem;
  background-color: var(--gray-light);
}

.stat-item.abnormal {
  background-color: #fee2e2;
  color: #b91c1c;
}

.stat-icon {
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--white);
}

.stat-item.abnormal .stat-icon {
  background-color: #fecaca;
  color: #b91c1c;
}

.stat-trend {
  font-size: 0.75rem;
}

.stat-trend.up {
  color: var(--danger-color);
}

.stat-trend.down {
  color: var(--success-color);
}

.btn-chart {
  background-color: var(--white);
  border: 1px solid var(--gray-light);
  color: var(--gray-color);
  border-radius: 2rem;
  padding: 0.5rem 1rem;
  font-size: 0.75rem;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.btn-chart:hover {
  background-color: var(--primary-light);
  color: var(--primary-color);
  border-color: var(--primary-light);
}

/* No Data Message */
.no-data-message {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  text-align: center;
  color: var(--gray-color);
}

.no-data-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
  color: var(--gray-light);
}

.no-data-icon.success {
  color: var(--success-color);
}

.no-data-message h4 {
  font-size: 1.25rem;
  margin-bottom: 0.5rem;
  color: var(--dark-color);
}

.no-data-message p {
  margin-bottom: 1.5rem;
}

/* Action Buttons */
.action-buttons {
  display: flex;
  gap: 0.5rem;
}

.btn-action {
  width: 2rem;
  height: 2rem;
  border-radius: 50%;
  border: none;
  background-color: var(--gray-light);
  color: var(--gray-color);
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-action:hover {
  background-color: var(--primary-light);
  color: var(--primary-color);
}

.btn-view {
  background-color: #e0f2fe;
  color: #0369a1;
}

.btn-print {
  background-color: #ecfccb;
  color: #65a30d;
}

.btn-notes {
  background-color: #f0fdf4;
  color: #15803d;
}

/* Bottom Dashboard */
.dashboard-bottom {
  grid-column: 1 / -1;
}

/* Filter Controls */
.filter-controls {
  display: flex;
  gap: 0.5rem;
}

.form-select {
  padding: 0.5rem 1rem;
  border-radius: 2rem;
  border: 1px solid var(--gray-light);
  background-color: var(--white);
  font-size: 0.875rem;
  color: var(--gray-color);
  cursor: pointer;
  transition: var(--transition);
}

.form-select:hover {
  border-color: var(--primary-light);
}

/* Floating Action Button */
.fab-container {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  display: flex;
  flex-direction: column-reverse;
  align-items: center;
  gap: 1rem;
}

.fab-primary {
  width: 3.5rem;
  height: 3.5rem;
  border-radius: 50%;
  background-color: var(--primary-color);
  color: var(--white);
  border: none;
  box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.2);
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  z-index: 100;
}

.fab-primary:hover {
  background-color: var(--secondary-color);
  transform: scale(1.1);
}

.fab-options {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-bottom: 1rem;
  opacity: 0;
  visibility: hidden;
  transform: translateY(20px);
  transition: var(--transition);
}

.fab-container:hover .fab-options {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.fab-option {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  background-color: var(--white);
  color: var(--primary-color);
  border: none;
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
}

.fab-option:hover {
  background-color: var(--primary-color);
  color: var(--white);
  transform: scale(1.1);
}

/* Responsive Adjustments */
@media (max-width: 1200px) {
  .dashboard-content {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 768px) {
  .header-content {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;
  }
  
  .header-right {
    width: 100%;
    justify-content: space-between;
  }
  
  .stats-bar {
    grid-template-columns: 1fr 1fr;
  }
  
  .vital-stats {
    flex-direction: column;
    gap: 0.5rem;
  }
}

@media (max-width: 576px) {
  .nurse-dashboard {
    padding: 1rem;
  }
  
  .stats-bar {
    grid-template-columns: 1fr;
  }
  
  .patient-table th, .opd-table th {
    display: none;
  }
  
  .patient-table td, .opd-table td {
    display: block;
    padding: 0.75rem;
  }
  
  .patient-table tr, .opd-table tr {
    margin-bottom: 1rem;
    display: block;
    border: 1px solid var(--gray-light);
    border-radius: var(--border-radius);
  }
  
  .action-buttons {
    justify-content: flex-end;
  }
}
</style>
{% endblock %}